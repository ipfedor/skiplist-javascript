{"version":3,"sources":["webpack:///webpack/bootstrap 12a680ed712ceaef9abf","webpack:///./src/index.js","webpack:///./src/SkipList.js","webpack:///./src/SkipListNode.js"],"names":[],"mappings":"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","file":"dist/bundle.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n\n/** WEBPACK FOOTER **\n ** webpack/bootstrap 12a680ed712ceaef9abf\n **/","export SkipList from './SkipList';\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/index.js\n **/","import SkipListNode from './SkipListNode';\n\nconst Nil = new SkipListNode(Infinity, null, 0);\n\nObject.defineProperty(Nil, 'next', {\n    configurable: false,\n    enumerable: false,\n    get: () => { throw new RangeError('Exceeded maximum range of skip list'); }\n});\n\nexport default class SkipList {\n    levels = 1;\n    tail = Nil;\n\n    constructor({ headKey=0, p=0.5, maxLevel=16 }) {\n        this.p = p;\n        this.maxLevel = maxLevel;\n        this.head = new SkipListNode(headKey, null, this.maxLevel);\n\n        for (let level = 0; level < this.levels; level++) {\n            this.head.next[level] = this.tail;\n        }\n    }\n\n    get(key) {\n        let node = this.head;\n        for (let level = this.levels - 1; level > -1; level--) {\n            while (node.next[level].key < key) {\n                node = node.next[level];\n            }\n            if (node.next[level].key === key) {\n                return node.next[level];\n            }\n        }\n    }\n\n    has(key) {\n        return this.get(key) !== void 0;\n    }\n\n    set(key, value) {\n        let node = this.head;\n        let update = new Array(this.levels);\n        for (let level = this.levels - 1; level > -1; level--) {\n            while (node.next[level].key < key) {\n                node = node.next[level];\n            }\n            update[level] = node;\n        }\n        node = node.next[0];\n        if (node.key === key) {\n            node.value = value;\n        } else {\n            let level = randomLevel(this.p, this.levels);\n            if (level === this.levels) {\n                if (this.levels < this.maxLevel) {\n                    this.levels++;\n                    this.head.next[level] = this.tail;\n                }\n                update.push(this.head);\n            }\n            const entry = new SkipListNode(key, value, level);\n            for (let i = 0; i <= level; i++) {\n                entry.next[i] = update[i].next[i];\n                update[i].next[i] = entry;\n            }\n        }\n    }\n\n    unset(key) {\n        let node = this.head;\n        let update = new Array(this.levels);\n        for (let level = this.levels - 1; level > -1; level--) {\n            while (node.next[level].key < key) {\n                node = node.next[level];\n            }\n            update[level] = node;\n        }\n        node = node.next[0];\n        for (let level = 0; level < this.levels; level++) {\n            if (update[level].next[level] !== node) {\n                break;\n            } else {\n                update[level].next[level] = node.next[level];\n            }\n        }\n        while (this.levels > 1 && this.head.next[this.levels - 1] === this.tail) {\n            this.levels--;\n        }\n    }\n\n    before(key) {\n        let node = this.head;\n        for (let level = this.levels - 1; level > -1; level--) {\n            while (node.next[level].key < key) {\n                node = node.next[level];\n            }\n        }\n        return node;\n    }\n\n    forEach(fn) {\n        let node = this.head.next[0];\n        while (node != Nil) {\n            fn(node);\n            node = node.next[0];\n        }\n    }\n\n    map(fn) {\n        let res = [];\n        this.forEach((value, key) => {\n            res.push(fn(value, key));\n        });\n        return res;\n    }\n\n    reduce(memo, fn) {\n        this.forEach((value, key) => {\n            memo = fn(memo, value, key);\n        });\n        return memo;\n    }\n}\n\nfunction randomLevel(p, maxLevel) {\n    let level = 0;\n    while (Math.random() < p && level < maxLevel) {\n        level++;\n    }\n    return level;\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/SkipList.js\n **/","export default class SkipListNode {\n    constructor(key, value, level) {\n        this.key = key;\n        this.value = value;\n        this.next = new Array(level);\n    }\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/SkipListNode.js\n **/"],"sourceRoot":""}